<!doctype html>
<html>
  <head>
    <title>Test Order API</title>
    <!-- Updated for deployment -->
  </head>
  <body>
    <h1>Test Order API</h1>
    <button onclick="testOrder()">Test Order Creation</button>
    <div id="result"></div>

    <script>
      async function testOrder() {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = 'Testing...';

        const testData = {
          customerName: 'Test Customer',
          customerEmail: 'test@example.com',
          customerPhone: '+33652413901',
          pickupTime: '12:00',
          pickupDate: '2024-12-20',
          items: [
            {
              id: 1,
              name: 'Test Sandwich',
              quantity: 2,
              price: 8.5,
            },
          ],
          totalAmount: 17.0,
          specialInstructions: 'Test order',
        };

        try {
          const response = await fetch('/api/orders', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(testData),
          });

          const data = await response.json();

          resultDiv.innerHTML = `
                    <h3>Response Status: ${response.status}</h3>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
        } catch (error) {
          resultDiv.innerHTML = `
                    <h3>Error:</h3>
                    <pre>${error.message}</pre>
                `;
        }
      }
    </script>
  </body>
</html>
